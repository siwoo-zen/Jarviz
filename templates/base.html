{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}Jarviz{% endblock %}</title>
  <link rel="stylesheet" href="{% static 'css/base.css' %}">
</head>
<body>
  <!-- ✅ 고정 사이드바 -->
  <div class="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-logo-container">
        <a href="/" class="sidebar-logo">
          <img src="{% static 'images/JZ.png' %}" alt="홈">
          <h2>Jarviz</h2>
        </a>
      </div>
    </div>
    <nav>
      <ul>
        <li class="dropdown">
          <div class="dropdown-toggle">공고 보기</div>
          <ul class="submenu">
            <li>모든 공고 보기</li>
            <li>내게 맞는 공고 추천</li>
            <li>관심 기업</li>
            <li>지역별 / 직무별 필터</li>
          </ul>
        </li>
        <li class="dropdown">
          <div class="dropdown-toggle">이력서 관리</div>
          <ul class="submenu">
            <li>이력서 작성</li>
            <li>AI 분석 피드백 보기</li>
            <li>포트폴리오 등록</li>
            <li>공개/비공개 설정</li>
            <li>지원 내역</li>
          </ul>
        </li>
        <li class="dropdown">
          <div class="dropdown-toggle">기업 서비스</div>
          <ul class="submenu">
            <li>공고 등록</li>
            <li>공고 목록 / 수정 / 삭제</li>
            <li>지원자 관리</li>
            <li>채용 결과 등록</li>
          </ul>
        </li>
        <li class="single-item">ai 매칭</li>
        <li class="single-item">채용트렌드</li>
        <li class="single-item">공지사항</li>
      </ul>
    </nav>
    <div class="sidebar-footer">
      <span class="sidebar-toggle" id="sidebarToggle">«</span>
    </div>
  </div>

  <!-- ✅ GNB -->
  <div class="gnb">
    <div class="search-box">
      <input type="text" placeholder="검색어 입력...">
      <button type="submit" class="search-btn">검색</button>
    </div>
    <div class="user-menu">
      <span>알림</span>
      <span>마이페이지</span>
      <button type="button" class="gnb-login-btn" onclick="location.href='/accounts/login/'">로그인</button>
    </div>
  </div>

  <!-- ✅ 메인 -->
  <main class="main">
    <div class="container">
      {% block content %}{% endblock %}
    </div>
    <footer>
      <p>© 2025 Jarviz</p>
    </footer>
  </main>

  <!-- ✅ 스크립트 -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      document.querySelectorAll('.dropdown-toggle').forEach(toggle => {
        toggle.addEventListener('click', () => {
          toggle.classList.toggle('open');
          const submenu = toggle.nextElementSibling;
          if (submenu) submenu.classList.toggle('show');
        });
      });

      const sidebar = document.querySelector('.sidebar');
      const gnb = document.querySelector('.gnb');
      const main = document.querySelector('.main');
      const toggleBtn = document.getElementById('sidebarToggle');

      toggleBtn.addEventListener('click', () => {
        sidebar.classList.toggle('collapsed');
        gnb.classList.toggle('collapsed');
        main.classList.toggle('collapsed');
        toggleBtn.textContent = sidebar.classList.contains('collapsed') ? '☰' : '«';
      });
    });
  </script>
</body>
</html>
