{% extends "base.html" %}
{% load static %}

{% block title %}ëŒ€ì‹œë³´ë“œ{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/main.css' %}">

<div class="container">
  <h1>í™˜ì˜í•©ë‹ˆë‹¤, {{ user.username }}ë‹˜!</h1>

  {% if user.is_company %}
  <!-- âœ… ê¸°ì—… ì‚¬ìš©ììš© ëŒ€ì‹œë³´ë“œ -->
<div class="dashboard-summary">
  {% if job_posts %}
  <a href="{% url 'workhub:job_list' %}" class="card-link">
    <div class="card">ğŸ“¢ ë“±ë¡í•œ ê³µê³  ìˆ˜: {{ job_posts|length }}</div>
  </a>
  <a href="{% url 'workhub:job_list' %}" class="card-link">
    <div class="card">ğŸ‘¥ ì „ì²´ ì§€ì›ì ìˆ˜: {{ applicant_count|default:"-" }}</div>
  </a>
  <a href="{% url 'workhub:job_list' %}" class="card-link">
    <div class="card">ğŸ“ˆ ê³µê³  ì¡°íšŒìˆ˜: {{ total_views|default:"-" }}</div>
  </a>
  {% else %}
    <div class="card" style="flex: 1; text-align: center;">
      <p>ë“±ë¡í•œ ê³µê³ ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
      <button class="employer-detail-btn" onclick="location.href='{% url 'workhub:job_create' %}'">ê³µê³  ë“±ë¡í•˜ê¸°</button>
    </div>
  {% endif %}
  </div>
  <div class="data-charts">
    <div class="card">
      <h3>ì§€ì›ì ìˆ˜ ì¶”ì´</h3>
      <p>[ì°¨íŠ¸ ì˜ì—­]</p>
    </div>
    <div class="card">
      <h3>ê³µê³  í´ë¦­ ìˆ˜</h3>
      <p>[ì°¨íŠ¸ ì˜ì—­]</p>
    </div>
  </div>

  <div class="domain-overview">
    <h3>ì±„ìš©ê³µê³  ê´€ë¦¬</h3>
    {% if job_posts %}
      <table>
        <thead>
          <tr>
            <th>ê³µê³ ëª…</th>
            <th>ë“±ë¡ì¼</th>
            <th>ë§ˆê°ì¼</th>
            <th>ì§€ì›ì ìˆ˜</th>
            <th>ê´€ë¦¬</th>
          </tr>
        </thead>
        <tbody>
          {% for job in job_posts %}
            <tr>
              <td>
                <a href="{% url 'workhub:job_detail' job.pk %}" class="job-title-link">
                  {{ job.title }}
                </a>
              </td>
              <td>{{ job.created_at|date:"Y-m-d" }}</td>
              <td>{{ job.deadline|date:"Y-m-d" }}</td>
              <td>-</td>  <!-- ì¶”í›„ ì§€ì›ì ìˆ˜ ì—°ê²° ì˜ˆì • -->
              <td>
                <a href="{% url 'workhub:job_edit' job.pk %}" class="job-edit-btn">ìˆ˜ì •í•˜ê¸°</a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>ë“±ë¡ëœ ê³µê³ ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endif %}
  </div>


  {% else %}
  <!-- âœ… ì§€ì›ììš© ëŒ€ì‹œë³´ë“œ -->
  <div class="dashboard-summary">
    <div class="card">
      {% if user.is_authenticated %}
        {% if resume %}
          <h3>ë‚´ ì´ë ¥ì„œ</h3>
          <p>{{ resume.title }}</p>
          <a href="{% url 'workhub:resume_edit' resume.id %}" class="resume-detail-btn">ìˆ˜ì •í•˜ê¸°</a>
        {% else %}
          <h3>ì´ë ¥ì„œ ì‘ì„±</h3>
          <p>ì•„ì§ ë“±ë¡ëœ ì´ë ¥ì„œê°€ ì—†ìŠµë‹ˆë‹¤.</p>
          <a href="{% url 'workhub:resume_create' %}" class="resume-detail-btn">ì´ë ¥ì„œ ì‘ì„±í•˜ê¸°</a>
        {% endif %}
      {% else %}
        <p><a href="{% url 'accounts:login' %}">ë¡œê·¸ì¸</a> í›„ ì´ë ¥ì„œë¥¼ ì‘ì„±í•˜ì„¸ìš”.</p>
      {% endif %}
    </div>       
    <div class="card">ğŸ” ì¶”ì²œ ê³µê³  ìˆ˜: 4ê±´</div>
    <div class="card">ğŸ“ ìµœê·¼ ì§€ì› ë‚´ì—­: 2ê±´</div>
  </div>

  <div class="data-charts">
    <div class="card">
      <h3>ì¶”ì²œ ì±„ìš©ê³µê³ </h3>
      <ul>
        <li>ë°±ì—”ë“œ ê°œë°œì - (ê¸°ì—…A)</li>
        <li>AI ì—”ì§€ë‹ˆì–´ - (ê¸°ì—…B)</li>
        <li>í”„ë¡ íŠ¸ì—”ë“œ ì¸í„´ - (ê¸°ì—…C)</li>
      </ul>
    </div>
    <div class="card">
      <h3>ìµœê·¼ ì§€ì› íˆìŠ¤í† ë¦¬</h3>
      <ul>
        <li>2025-04-29 - Java ê°œë°œì (ì§€ì› ì™„ë£Œ)</li>
        <li>2025-04-27 - UI ë””ìì´ë„ˆ (ê²€í†  ì¤‘)</li>
      </ul>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
